# å…¬å›­ç®¡ç†ç³»ç»Ÿ - å‰ç«¯å¼€å‘æŒ‡å—

æ³¨ï¼šç›®å‰å‰ç«¯æ¡†æ¶ä¸­çš„çš„è¯¦ç»†é¡µé¢å‘½åæˆ–è€…é¡µé¢çš„åˆ†å¸ƒæ ¹æ®å¼€å‘éœ€è¦è‡ªè¡Œè°ƒæ•´

## ç›®å½•

- [1. æŠ€æœ¯æ ˆæ¦‚è§ˆ](#1-æŠ€æœ¯æ ˆæ¦‚è§ˆ)
- [2. é¡¹ç›®ç»“æ„](#2-é¡¹ç›®ç»“æ„)
- [3. æ ¸å¿ƒæ¶æ„è®¾è®¡](#3-æ ¸å¿ƒæ¶æ„è®¾è®¡)
- [4. å¼€å‘å®è·µæŒ‡å—](#4-å¼€å‘å®è·µæŒ‡å—)
- [5. API äº¤äº’è¯´æ˜](#5-api-äº¤äº’è¯´æ˜)
- [6. å¼€å‘å®è·µæŒ‡å—](#6-å¼€å‘å®è·µæŒ‡å—)
- [7. éƒ¨ç½²é…ç½®è¯´æ˜](#7-éƒ¨ç½²é…ç½®è¯´æ˜)

---

## 1. æŠ€æœ¯æ ˆæ¦‚è§ˆ

### 1.1 æ ¸å¿ƒæŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” | è¯´æ˜ |
|------|------|------|------|
| Vue 3 | 3.x | å‰ç«¯æ¡†æ¶ | ä½¿ç”¨ Composition APIï¼Œæ›´å¥½çš„é€»è¾‘å¤ç”¨ |
| Vite | 4.x | æ„å»ºå·¥å…· | å¿«é€Ÿçš„å¼€å‘æœåŠ¡å™¨å’Œæ„å»ºå·¥å…· |
| Element Plus | 2.x | UI ç»„ä»¶åº“ | åŸºäº Vue 3 çš„ä¼ä¸šçº§ UI ç»„ä»¶åº“ |
| Pinia | 2.x | çŠ¶æ€ç®¡ç† | è½»é‡çº§çŠ¶æ€ç®¡ç†ï¼Œæ›¿ä»£ Vuex |
| Vue Router | 4.x | è·¯ç”±ç®¡ç† | å®˜æ–¹è·¯ç”±ç®¡ç†å™¨ |
| Axios | 1.x | HTTP è¯·æ±‚ | Promise åŸºç¡€çš„ HTTP å®¢æˆ·ç«¯ |

### 1.2 å¼€å‘å·¥å…·

| å·¥å…· | ç”¨é€” |
|------|------|
| ESLint | ä»£ç è´¨é‡æ£€æŸ¥ |
| Prettier | ä»£ç æ ¼å¼åŒ– |
| Vitest | å•å…ƒæµ‹è¯•æ¡†æ¶ |

---

## 2. é¡¹ç›®ç»“æ„

### 2.1 ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ components/          # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ common/         # é€šç”¨ç»„ä»¶ï¼ˆè¡¨æ ¼ã€è¡¨å•ã€å¯¹è¯æ¡†ç­‰ï¼‰
â”‚   â””â”€â”€ business/       # ä¸šåŠ¡ç»„ä»¶ï¼ˆç”¨æˆ·å¡ç‰‡ã€è®¾æ–½çŠ¶æ€ç­‰ï¼‰
â”œâ”€â”€ views/              # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ dashboard/      # ä»ªè¡¨æ¿
â”‚   â”œâ”€â”€ visitors/       # æ¸¸å®¢ç®¡ç†
â”‚   â”œâ”€â”€ tickets/        # ç¥¨åŠ¡ç®¡ç†
â”‚   â”œâ”€â”€ facilities/     # è®¾æ–½ç®¡ç†
â”‚   â”œâ”€â”€ finance/        # è´¢åŠ¡ç®¡ç†
â”‚   â”œâ”€â”€ hr/            # äººåŠ›èµ„æº
â”‚   â””â”€â”€ system/        # ç³»ç»Ÿç®¡ç†
â”œâ”€â”€ stores/             # Pinia çŠ¶æ€ç®¡ç†
â”œâ”€â”€ router/             # è·¯ç”±é…ç½®
â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”œâ”€â”€ api/               # API æ¥å£å°è£…
â”œâ”€â”€ assets/            # é™æ€èµ„æº
â””â”€â”€ styles/            # å…¨å±€æ ·å¼
```

### 2.2 æ–‡ä»¶å‘½åè§„èŒƒ

| ç±»å‹ | å‘½åè§„èŒƒ | ç¤ºä¾‹ |
|------|----------|------|
| ç»„ä»¶æ–‡ä»¶ | PascalCase | `UserList.vue` |
| é¡µé¢æ–‡ä»¶ | PascalCase | `DashboardView.vue` |
| å·¥å…·æ–‡ä»¶ | kebab-case | `date-utils.js` |
| æ ·å¼æ–‡ä»¶ | kebab-case | `common-styles.scss` |
| å¸¸é‡æ–‡ä»¶ | kebab-case | `api-constants.js` |

---

## 3. æ ¸å¿ƒæ¶æ„è®¾è®¡

### 3.1 æƒé™ç®¡ç†è®¾è®¡

#### è§’è‰²å®šä¹‰

```javascript
const roles = {
  super_admin: 'è¶…çº§ç®¡ç†å‘˜',
  finance_manager: 'è´¢åŠ¡ç®¡ç†å‘˜',
  hr_manager: 'äººäº‹ç®¡ç†å‘˜',
  operations_manager: 'è¿è¥ç®¡ç†å‘˜',
  ticket_manager: 'ç¥¨åŠ¡ç®¡ç†å‘˜',
  customer_service: 'å®¢æœäººå‘˜',
  employee: 'æ™®é€šå‘˜å·¥'
}
```

#### æƒé™æ§åˆ¶å±‚çº§

- **è·¯ç”±çº§åˆ«**: æ§åˆ¶é¡µé¢è®¿é—®æƒé™
- **èœå•çº§åˆ«**: åŠ¨æ€æ˜¾ç¤ºå¯è®¿é—®èœå•
- **æŒ‰é’®çº§åˆ«**: æ§åˆ¶æ“ä½œæŒ‰é’®æ˜¾ç¤º
- **æ•°æ®çº§åˆ«**: æ§åˆ¶æ•°æ®è®¿é—®èŒƒå›´

#### æƒé™éªŒè¯ç¤ºä¾‹

```javascript
// è·¯ç”±å®ˆå«
router.beforeEach((to, from, next) => {
  const userStore = useUserStore()

  if (to.meta.requiresAuth && !userStore.isLoggedIn) {
    next('/login')
  } else if (to.meta.roles && !userStore.hasRole(to.meta.roles)) {
    next('/403')
  } else {
    next()
  }
})
```

### 3.2 çŠ¶æ€ç®¡ç†è®¾è®¡

#### ç”¨æˆ·çŠ¶æ€ (stores/user.js)

```javascript
export const useUserStore = defineStore('user', {
  state: () => ({
    token: null,
    userInfo: null,
    permissions: []
  }),

  actions: {
    async login(credentials) {
      // ç™»å½•é€»è¾‘
    },

    async logout() {
      // ç™»å‡ºé€»è¾‘
    },

    hasRole(roles) {
      // æƒé™æ£€æŸ¥
    }
  }
})
```

#### åº”ç”¨çŠ¶æ€ (stores/app.js)

```javascript
export const useAppStore = defineStore('app', {
  state: () => ({
    theme: 'light',
    sidebarCollapsed: false,
    globalLoading: false,
    language: 'zh-CN'
  }),

  actions: {
    toggleSidebar() {
      this.sidebarCollapsed = !this.sidebarCollapsed
    },

    setGlobalLoading(loading) {
      this.globalLoading = loading
    }
  }
})
```

### 3.3 ç»„ä»¶æ¶æ„

#### å¸ƒå±€ç»„ä»¶

- **DefaultLayout**: ä¸»å¸ƒå±€å®¹å™¨ï¼ŒåŒ…å«ä¾§è¾¹æ å’Œä¸»å†…å®¹åŒº
- **Sidebar**: ä¾§è¾¹æ å¯¼èˆªï¼Œæ”¯æŒæŠ˜å å’Œæƒé™æ§åˆ¶
- **Navbar**: é¡¶éƒ¨å¯¼èˆªæ ï¼ŒåŒ…å«ç”¨æˆ·ä¿¡æ¯å’Œæ“ä½œ
- **Breadcrumb**: é¢åŒ…å±‘å¯¼èˆªï¼Œæ˜¾ç¤ºå½“å‰é¡µé¢è·¯å¾„

#### ä¸šåŠ¡ç»„ä»¶

- **PageTemplate**: é€šç”¨é¡µé¢æ¨¡æ¿ï¼Œç»Ÿä¸€é¡µé¢ç»“æ„
- **DataTable**: æ•°æ®è¡¨æ ¼ç»„ä»¶ï¼Œæ”¯æŒåˆ†é¡µã€æ’åºã€ç­›é€‰
- **SearchForm**: æœç´¢è¡¨å•ç»„ä»¶ï¼Œç»Ÿä¸€æœç´¢äº¤äº’
- **å„ä¸šåŠ¡æ¨¡å—ä¸“ç”¨ç»„ä»¶**

#### åŸºç¡€ç»„ä»¶

åŸºäº Element Plus çš„äºŒæ¬¡å°è£…ï¼š

- **FormDialog**: è¡¨å•å¯¹è¯æ¡†ï¼Œç»Ÿä¸€è¡¨å•äº¤äº’
- **ConfirmDialog**: ç¡®è®¤å¯¹è¯æ¡†ï¼Œç»Ÿä¸€ç¡®è®¤æ“ä½œ
- **ImageUpload**: å›¾ç‰‡ä¸Šä¼ ç»„ä»¶ï¼Œæ”¯æŒé¢„è§ˆå’Œåˆ é™¤
- **DateRangePicker**: æ—¥æœŸèŒƒå›´é€‰æ‹©å™¨

### 3.4 è·¯ç”±è®¾è®¡

#### è·¯ç”±ç»“æ„

```
/login                  # ç™»å½•é¡µ
/                      # ä¸»å¸ƒå±€
â”œâ”€â”€ /dashboard         # ä»ªè¡¨æ¿
â”œâ”€â”€ /visitors/*        # æ¸¸å®¢ç®¡ç†
â”œâ”€â”€ /tickets/*         # ç¥¨åŠ¡ç®¡ç†
â”œâ”€â”€ /facilities/*      # è®¾æ–½ç®¡ç†
â”œâ”€â”€ /finance/*         # è´¢åŠ¡ç®¡ç†
â”œâ”€â”€ /hr/*             # äººåŠ›èµ„æº
â””â”€â”€ /system/*         # ç³»ç»Ÿç®¡ç†
```

#### è·¯ç”±é…ç½®ç¤ºä¾‹

```javascript
{
  path: '/visitors',
  name: 'Visitors',
  component: DefaultLayout,
  meta: {
    title: 'æ¸¸å®¢ç®¡ç†',
    requiresAuth: true,
    roles: ['admin', 'customer_service']
  },
  children: [
    {
      path: '',
      name: 'VisitorList',
      component: () => import('@/views/visitors/VisitorList.vue'),
      meta: { title: 'æ¸¸å®¢åˆ—è¡¨' }
    }
  ]
}
```

### 2.6 API è®¾è®¡

#### è¯·æ±‚å°è£…

- **ç»Ÿä¸€æ‹¦æˆªå™¨**: å¤„ç†è®¤è¯ã€é”™è¯¯ã€åŠ è½½çŠ¶æ€
- **ç¯å¢ƒé…ç½®**: æ”¯æŒå¤šç¯å¢ƒ API åœ°å€
- **é”™è¯¯å¤„ç†**: ç»Ÿä¸€çš„é”™è¯¯æç¤ºå’Œå¤„ç†
- **è¯·æ±‚é‡è¯•**: è‡ªåŠ¨é‡è¯•æœºåˆ¶
- **è¯·æ±‚ç¼“å­˜**: åˆç†çš„ç¼“å­˜ç­–ç•¥

#### æ¥å£è§„èŒƒ

```javascript
// è¯·æ±‚æ ¼å¼
{
  method: 'GET|POST|PUT|DELETE',
  url: '/api/endpoint',
  data: {},
  params: {}
}

// å“åº”æ ¼å¼
{
  code: 200,
  message: 'success',
  data: {},
  timestamp: '2024-01-01T00:00:00Z'
}
```

### 2.7 å¼€å‘è§„èŒƒ

#### å‘½åè§„èŒƒ

- **ç»„ä»¶**: PascalCase (UserList.vue)
- **æ–‡ä»¶**: kebab-case (user-list.vue)
- **å˜é‡**: camelCase (userName)
- **å¸¸é‡**: UPPER_SNAKE_CASE (API_BASE_URL)
- **CSSç±»**: kebab-case (.user-card)

#### ä»£ç ç»„ç»‡

```vue
<template>
  <!-- æ¨¡æ¿å†…å®¹ -->
</template>

<script setup>
// 1. å¯¼å…¥ä¾èµ–
// 2. å®šä¹‰ props å’Œ emits
// 3. å“åº”å¼æ•°æ®
// 4. è®¡ç®—å±æ€§
// 5. æ–¹æ³•å®šä¹‰
// 6. ç”Ÿå‘½å‘¨æœŸé’©å­
</script>

<style scoped>
/* ç»„ä»¶æ ·å¼ */
</style>
```

---

## 4. å¼€å‘å®è·µæŒ‡å—

### 4.1 API è¯·æ±‚å°è£…

#### è¯·æ±‚æ‹¦æˆªå™¨

```javascript
// è¯·æ±‚æ‹¦æˆªå™¨
service.interceptors.request.use(
  config => {
    const userStore = useUserStore()
    const appStore = useAppStore()

    // æ˜¾ç¤ºå…¨å±€åŠ è½½çŠ¶æ€
    appStore.setGlobalLoading(true)

    // æ·»åŠ è®¤è¯ token
    if (userStore.token) {
      config.headers.Authorization = `Bearer ${userStore.token}`
    }

    return config
  }
)
```

#### å“åº”æ‹¦æˆªå™¨

```javascript
// å“åº”æ‹¦æˆªå™¨
service.interceptors.response.use(
  response => {
    const appStore = useAppStore()
    appStore.setGlobalLoading(false)

    return response.data
  },
  error => {
    const appStore = useAppStore()
    appStore.setGlobalLoading(false)

    // ç»Ÿä¸€é”™è¯¯å¤„ç†
    handleApiError(error)
    return Promise.reject(error)
  }
)
```

### 4.2 ç¯å¢ƒé…ç½®

#### å¼€å‘ç¯å¢ƒé…ç½®

```bash
VITE_APP_TITLE=ä¸»é¢˜å…¬å›­ç®¡ç†ç³»ç»Ÿ - å¼€å‘ç¯å¢ƒ
VITE_API_BASE_URL=http://localhost:8080/api
VITE_APP_ENV=development
```

#### ä»£ç†é…ç½®

```javascript
server: {
  port: 3000,
  open: true,
  proxy: {
    '/api': {
      target: 'http://localhost:8080',
      changeOrigin: true,
      secure: false
    }
  }
}
```

---

## 5. API äº¤äº’è¯´æ˜

### 5.1 è¯·æ±‚å“åº”æ ¼å¼

#### è¯·æ±‚æ ¼å¼

```javascript
{
  method: 'GET|POST|PUT|DELETE',
  url: '/api/endpoint',
  data: {},
  params: {}
}
```

#### å“åº”æ ¼å¼

```javascript
{
  code: 200,
  message: 'success',
  data: {},
  timestamp: '2024-01-01T00:00:00Z'
}
```

### 5.2 API æ¥å£ç¤ºä¾‹

#### ç”¨æˆ·ç®¡ç†æ¥å£

```javascript
// è·å–ç”¨æˆ·åˆ—è¡¨
GET /api/users?page=1&size=10

// è·å–ç”¨æˆ·è¯¦æƒ…
GET /api/users/{id}

// åˆ›å»ºç”¨æˆ·
POST /api/users
{
  "name": "å¼ ä¸‰",
  "email": "zhangsan@example.com",
  "role": "employee"
}

// æ›´æ–°ç”¨æˆ·
PUT /api/users/{id}
{
  "name": "æå››",
  "email": "lisi@example.com"
}

// åˆ é™¤ç”¨æˆ·
DELETE /api/users/{id}
```

---

## 6. å¼€å‘å®è·µæŒ‡å—

### 6.1 æ·»åŠ æ–°åŠŸèƒ½æ¨¡å—çš„æ­¥éª¤

#### æ­¥éª¤1: åˆ›å»ºé¡µé¢ç»„ä»¶

```vue
<!-- src/views/example/ExampleList.vue -->
<template>
  <div class="example-list">
    <el-card>
      <template #header>
        <div class="card-header">
          <span>ç¤ºä¾‹ç®¡ç†</span>
          <el-button type="primary" @click="handleAdd">æ–°å¢</el-button>
        </div>
      </template>

      <el-table :data="tableData" :loading="loading">
        <el-table-column prop="id" label="ID" />
        <el-table-column prop="name" label="åç§°" />
        <el-table-column label="æ“ä½œ">
          <template #default="{ row }">
            <el-button size="small" @click="handleEdit(row)">ç¼–è¾‘</el-button>
            <el-button size="small" type="danger" @click="handleDelete(row)">åˆ é™¤</el-button>
          </template>
        </el-table-column>
      </el-table>
    </el-card>
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue'
import { useExampleStore } from '@/stores/example'

const exampleStore = useExampleStore()
const tableData = ref([])
const loading = ref(false)

const fetchData = async () => {
  loading.value = true
  try {
    tableData.value = await exampleStore.getList()
  } finally {
    loading.value = false
  }
}

onMounted(() => {
  fetchData()
})
</script>
```

#### æ­¥éª¤2: åˆ›å»ºçŠ¶æ€ç®¡ç†

```javascript
// src/stores/example.js
import { defineStore } from 'pinia'
import { request } from '@/utils/request'

export const useExampleStore = defineStore('example', {
  state: () => ({
    list: [],
    currentItem: null
  }),

  actions: {
    async getList(params = {}) {
      const data = await request.get('/examples', params)
      this.list = data.items || []
      return this.list
    },

    async getById(id) {
      const data = await request.get(`/examples/${id}`)
      this.currentItem = data
      return data
    },

    async create(item) {
      const data = await request.post('/examples', item)
      this.list.unshift(data)
      return data
    },

    async update(id, item) {
      const data = await request.put(`/examples/${id}`, item)
      const index = this.list.findIndex(x => x.id === id)
      if (index !== -1) {
        this.list[index] = data
      }
      return data
    },

    async delete(id) {
      await request.delete(`/examples/${id}`)
      this.list = this.list.filter(x => x.id !== id)
    }
  }
})
```

#### æ­¥éª¤3: é…ç½®è·¯ç”±

```javascript
// src/router/index.js
{
  path: '/example',
  name: 'Example',
  component: () => import('@/layouts/DefaultLayout.vue'),
  meta: {
    title: 'ç¤ºä¾‹ç®¡ç†',
    requiresAuth: true,
    roles: ['admin', 'employee']
  },
  children: [
    {
      path: '',
      name: 'ExampleList',
      component: () => import('@/views/example/ExampleList.vue'),
      meta: { title: 'ç¤ºä¾‹åˆ—è¡¨' }
    },
    {
      path: 'create',
      name: 'ExampleCreate',
      component: () => import('@/views/example/ExampleForm.vue'),
      meta: { title: 'æ–°å¢ç¤ºä¾‹' }
    }
  ]
}
```

### 6.2 ä¿®æ”¹ç°æœ‰é¡µé¢çš„æ ‡å‡†æµç¨‹

1. **å®šä½æ–‡ä»¶**: åœ¨ `src/views/` ä¸­æ‰¾åˆ°å¯¹åº”æ¨¡å—
2. **ä¿®æ”¹ç»„ä»¶**: æ›´æ–°æ¨¡æ¿ã€é€»è¾‘æˆ–æ ·å¼
3. **æ›´æ–°çŠ¶æ€**: å¦‚éœ€è¦ï¼Œä¿®æ”¹å¯¹åº”çš„ store
4. **æµ‹è¯•éªŒè¯**: ç¡®ä¿åŠŸèƒ½æ­£å¸¸å’Œæ•°æ®æµæ­£ç¡®

### 6.3 ä»£ç è´¨é‡ä¿è¯

#### ä»£ç æ£€æŸ¥

- **ESLint**: ä»£ç é£æ ¼æ£€æŸ¥
- **Prettier**: ä»£ç æ ¼å¼åŒ–
- **Vueå®˜æ–¹é£æ ¼æŒ‡å—**: éµå¾ªVue.jså®˜æ–¹æ¨è

#### æµ‹è¯•ç­–ç•¥

- **å•å…ƒæµ‹è¯•**: ä½¿ç”¨ Vitest è¿›è¡Œç»„ä»¶æµ‹è¯•
- **é›†æˆæµ‹è¯•**: API æ¥å£æµ‹è¯•

---

## 7. éƒ¨ç½²é…ç½®è¯´æ˜

### 7.1 å‰ç«¯éƒ¨ç½²

#### æ„å»ºé…ç½®

```bash
# å¼€å‘ç¯å¢ƒ
npm run dev

# ç”Ÿäº§æ„å»º
npm run build

# é¢„è§ˆæ„å»ºç»“æœ
npm run preview
```

#### ç¯å¢ƒå˜é‡

```bash
# .env.production
VITE_APP_TITLE=ä¸»é¢˜å…¬å›­ç®¡ç†ç³»ç»Ÿ
VITE_API_BASE_URL=https://api.example.com/api
VITE_APP_ENV=production
```

#### éƒ¨ç½²åˆ°é™æ€æœåŠ¡å™¨

```bash
# æ„å»ºé¡¹ç›®
npm run build

# å°† dist ç›®å½•éƒ¨ç½²åˆ° Web æœåŠ¡å™¨
# ä¾‹å¦‚ï¼šNginxã€Apacheã€æˆ–äº‘æœåŠ¡å•†çš„é™æ€æ‰˜ç®¡æœåŠ¡
```

#### Nginx é…ç½®ç¤ºä¾‹

```nginx
server {
    listen 80;
    server_name your-domain.com;
    root /path/to/dist;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    location /api {
        proxy_pass http://backend-server:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Vue 3 å®˜æ–¹æ–‡æ¡£](https://vuejs.org/)
- [Element Plus ç»„ä»¶åº“](https://element-plus.org/)
- [Pinia çŠ¶æ€ç®¡ç†](https://pinia.vuejs.org/)
- [Vite æ„å»ºå·¥å…·](https://vitejs.dev/)
- [Vue Router è·¯ç”±ç®¡ç†](https://router.vuejs.org/)

---

## ğŸ”„ æ›´æ–°æ—¥å¿—

| ç‰ˆæœ¬ | æ—¥æœŸ | æ›´æ–°å†…å®¹ |
|------|------|----------|
| 1.0.0 | 2024-01-01 | åˆå§‹ç‰ˆæœ¬ |
| 1.1.0 | 2024-01-15 | æ·»åŠ æƒé™ç®¡ç†è®¾è®¡ |
| 1.2.0 | 2024-02-01 | å®Œå–„å¼€å‘å®è·µæŒ‡å— |
